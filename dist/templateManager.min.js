"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mandatory(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];throw new Error("Missing parameter "+e)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),TemplateManager=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?mandatory():arguments[0],n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];_classCallCheck(this,e),_.templateSettings.interpolate=/\{\{(.+?)\}\}/g,this.viewPaths=t,this.cached={},n?this.callbackWhenLoaded=n:this.callbackWhenLoaded=function(){console.log("TemplateManager.js: all templates loaded.")};var a=this;_.each(this.viewPaths,function(e,t,n){$.get(a.viewPaths[t],function(e){a.store(t,e),_.every(_.keys(a.viewPaths),function(e){return _.has(a.cached,e)})&&a.callbackWhenLoaded()})})}return _createClass(e,[{key:"render",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=this;return this.isCached(e)?this.cached[e](t):void $.get(this.urlFor(e),function(a){n.store(e,a),n.render(e,t)})}},{key:"renderInTarget",value:function(e,t,n){var a=this;this.isCached(e)?$(n).append(this.cached[e](t)):$.get(this.urlFor(e),function(r){a.store(e,r),a.renderInTarget(e,t,n)})}},{key:"renderSync",value:function(e){this.isCached(e)||this.fetch(e),this.render(e)}},{key:"prefetch",value:function(e){var t=this;$.get(this.urlFor(e),function(n){t.store(e,n)})}},{key:"fetch",value:function(e){if(!this.isCached(e)){var t=$.ajax({url:this.urlFor(e),async:!1}).responseText;this.store(e,t)}}},{key:"isCached",value:function(e){return!!this.cached[e]}},{key:"store",value:function(e,t){this.cached[e]=_.template(t)}},{key:"urlFor",value:function(e){return this.viewPaths[e]}}]),e}();